# x402email — Pay-per-send email via x402 protocol

> Send email with a single HTTP request. No API keys. No accounts. Pay $0.02 per email.

## Base URL

https://x402email.com

## x402 Discovery

GET /.well-known/x402

## Endpoints

### POST /api/send — Send email (shared domain)
- Protection: x402 payment ($0.02 USDC on Base)
- Sends from: relay@x402email.com
- Body: { "to": ["email"], "subject": "string", "html": "string", "text": "string", "replyTo": "email" }
- Requires either "html" or "text" (or both)
- Returns: { "success": true, "messageId": "string", "from": "string" }

### POST /api/subdomain/buy — Purchase a custom subdomain
- Protection: x402 payment ($5 USDC)
- Body: { "subdomain": "yourname" }
- Subdomain rules: 3-30 chars, lowercase alphanumeric + hyphens
- Creates yourname.x402email.com with full email sending capability
- DNS verification takes ~5 minutes after purchase
- Returns: { "success": true, "subdomain": "yourname.x402email.com", "dnsStatus": "pending" }

### POST /api/subdomain/send — Send from custom subdomain
- Protection: x402 payment ($0.005 USDC)
- Payer wallet must be owner or authorized signer for the subdomain
- Body: { "from": "you@yourname.x402email.com", "to": ["email"], "subject": "string", "html": "string", "text": "string", "replyTo": "email" }
- Returns: { "success": true, "messageId": "string", "from": "string" }

### POST /api/subdomain/signers — Manage authorized wallets
- Protection: SIWX wallet proof only (free, no payment)
- Only the subdomain owner can manage signers
- Body: { "action": "add" | "remove", "subdomain": "yourname", "walletAddress": "0x..." }
- Max 50 signers per subdomain

### GET /api/subdomain/status?subdomain=yourname — Check subdomain status
- Protection: SIWX wallet proof only (free, no payment)
- Owner or any signer can check status
- Returns: { "subdomain": "string", "ownerWallet": "string", "dnsVerified": bool, "sesVerified": bool, "signerCount": number, "signers": ["0x..."] }

## Forwarding Inbox

Buy `username@x402email.com` for $1/month. Emails sent to that address are forwarded to your real email. You can also send from your inbox address. Duration-based pricing with bulk discounts. Anyone can top up any inbox. Cancel anytime for a pro-rata refund.

### POST /api/inbox/buy — Buy a forwarding inbox ($1, 30 days)
- Protection: x402 payment ($1 USDC on Base)
- Body: { "username": "alice", "forwardTo": "alice@gmail.com" }
- Username rules: 3-30 chars, lowercase alphanumeric + hyphens
- Returns: { "success": true, "inbox": "alice@x402email.com", "forwardTo": "alice@gmail.com", "expiresAt": "ISO date", "daysRemaining": 30 }

### POST /api/inbox/topup — Top up inbox 30 days ($1)
- Protection: x402 payment ($1 USDC)
- Anyone can top up any inbox — no SIWX required
- Body: { "username": "alice" }
- Returns: { "success": true, "inbox": "alice", "expiresAt": "ISO date", "daysRemaining": number, "daysAdded": 30 }

### POST /api/inbox/topup/quarter — Top up inbox 90 days ($2.50, save 17%)
- Protection: x402 payment ($2.50 USDC)
- Anyone can top up any inbox — no SIWX required
- Body: { "username": "alice" }
- Returns: { "success": true, "inbox": "alice", "expiresAt": "ISO date", "daysRemaining": number, "daysAdded": 90 }

### POST /api/inbox/topup/year — Top up inbox 365 days ($8, save 34%)
- Protection: x402 payment ($8 USDC)
- Anyone can top up any inbox — no SIWX required
- Body: { "username": "alice" }
- Returns: { "success": true, "inbox": "alice", "expiresAt": "ISO date", "daysRemaining": number, "daysAdded": 365 }

### POST /api/inbox/send — Send from your inbox address ($0.001)
- Protection: x402 payment ($0.005 USDC)
- Payer wallet must be the inbox owner
- Body: { "username": "alice", "to": ["bob@example.com"], "subject": "Hello", "html": "<p>Hi</p>", "text": "Hi", "replyTo": "alice@gmail.com" }
- Requires either "html" or "text" (or both)
- Returns: { "success": true, "messageId": "string", "from": "alice@x402email.com" }

### GET /api/inbox/status?username=alice — Check inbox status
- Protection: SIWX wallet proof only (free, no payment)
- Only the inbox owner can check status
- Returns: { "inbox": "alice@x402email.com", "ownerWallet": "0x...", "forwardTo": "email", "expiresAt": "ISO date", "daysRemaining": number, "daysOwned": number, "active": bool, "pricing": {...} }

### POST /api/inbox/update — Change forwarding address
- Protection: SIWX wallet proof only (free, no payment)
- Only the inbox owner can update
- Body: { "username": "alice", "forwardTo": "newemail@example.com" }
- Returns: { "success": true, "inbox": "alice@x402email.com", "forwardTo": "newemail@example.com" }

### POST /api/inbox/cancel — Cancel inbox and get pro-rata refund
- Protection: SIWX wallet proof only (free, no payment)
- Only the inbox owner can cancel
- Body: { "username": "alice", "refundAddress": "0x..." }
- refundAddress is optional, defaults to caller's wallet
- Returns: { "success": true, "inbox": "alice@x402email.com", "cancelled": true, "refund": { "amount": "0.50", "currency": "USDC", "network": "eip155:8453", "to": "0x...", "status": "pending" }, "daysRemaining": 15 }

## Images in Emails

To include images, use `<img src="url">` in the "html" body. Host images on agentupload.dev (x402-powered file uploads, see https://agentupload.dev/llms.txt). Upload via x402 payment → get a public URL → reference in HTML. Prefer hosted URLs over base64 data URIs — most email clients strip data URIs.

## Agent Integration

The recommended way for AI agents to interact with x402email is via the x402 MCP server (`@x402scan/mcp`). It handles x402 payment negotiation and retry logic automatically. Any x402-compatible client paying USDC on Base will also work.

## Payment Details

- Network: Base (eip155:8453)
- Currency: USDC
- Protocol: x402 (https://www.x402.org)
- Send first request → receive 402 with PAYMENT-REQUIRED header → sign payment → resend with payment header

## SIWX Authentication

Free management endpoints (status, update, cancel, signers) require SIGN-IN-WITH-X header for wallet identity verification. Send endpoints identify the wallet from the x402 payment header instead.
SIWX is part of the x402 protocol extensions (CAIP-122 compliant, supports EVM + Solana).
